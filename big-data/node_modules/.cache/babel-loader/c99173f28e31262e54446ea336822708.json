{"remainingRequest":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18167\\Desktop\\final year\\big-data\\src\\views\\RestaurantManagement.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\src\\views\\RestaurantManagement.vue","mtime":1742915780689},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\babel.config.js","mtime":1725678814000},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742859679583},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\babel-loader\\lib\\index.js","mtime":1742859682775},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742859679583},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\vue-loader\\lib\\index.js","mtime":1742859683968}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdSZXN0YXVyYW50TWFuYWdlbWVudCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlc3RhdXJhbnRzOiBbXSwKICAgICAgb3duZXJzOiBbXSwKICAgICAgcmVzdGF1cmFudEZvcm06IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBidXNpbmVzc0hvdXJzOiAnJywKICAgICAgICBzdHlsZTogJycsCiAgICAgICAgcHJpY2U6ICcnLAogICAgICAgIHNjb3JlOiAnMCcsCiAgICAgICAgaW1hZ2U6ICcnLAogICAgICAgIGxhdDogJycsCiAgICAgICAgbG5nOiAnJywKICAgICAgICBvd25lcklkOiBudWxsCiAgICAgIH0sCiAgICAgIGVkaXRNb2RlOiBmYWxzZSwKICAgICAgaXNOZXdSZXN0YXVyYW50OiB0cnVlLAogICAgICB1c2VyUm9sZTogJycsCiAgICAgIHVzZXJJZDogbnVsbCwKICAgICAgbWFwOiBudWxsLAogICAgICBtYXJrZXI6IG51bGwsCiAgICAgIG1hcEVycm9yOiBudWxsLAogICAgICBhZGRyZXNzTG9va3VwVGltZW91dDogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyBHZXQgdXNlciBpbmZvIGZyb20gbG9jYWxTdG9yYWdlCiAgICB0aGlzLnVzZXJSb2xlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJSb2xlJyk7CiAgICB0aGlzLnVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKCiAgICAvLyBMb2FkIHJlc3RhdXJhbnRzIGJhc2VkIG9uIHJvbGUKICAgIHRoaXMubG9hZFJlc3RhdXJhbnRzKCk7CgogICAgLy8gSWYgbWFuYWdlciwgbG9hZCBvd25lcnMgZm9yIHNlbGVjdGlvbgogICAgaWYgKHRoaXMudXNlclJvbGUgPT09ICdNYW5hZ2VyJykgewogICAgICB0aGlzLmxvYWRPd25lcnMoKTsKICAgIH0gZWxzZSBpZiAodGhpcy51c2VyUm9sZSA9PT0gJ093bmVyJykgewogICAgICAvLyBJZiBvd25lciwgc2V0IG93bmVySWQgdG8gY3VycmVudCB1c2VyCiAgICAgIHRoaXMucmVzdGF1cmFudEZvcm0ub3duZXJJZCA9IHRoaXMudXNlcklkOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIOWIneWni+WMluWcsOWbvumAieeCueWZqAogICAgdGhpcy5pbml0aWFsaXplTG9jYXRpb25QaWNrZXIoKTsKCiAgICAvLyDlvZPlnLDlnYDmlLnlj5jml7bvvIzlsJ3or5Xoh6rliqjlrprkvY0KICAgIHRoaXMuJHdhdGNoKCdyZXN0YXVyYW50Rm9ybS5hZGRyZXNzJywgbmV3VmFsdWUgPT4gewogICAgICBpZiAobmV3VmFsdWUgJiYgbmV3VmFsdWUubGVuZ3RoID4gNSkgewogICAgICAgIC8vIOS9v+eUqOmYsuaKlu+8jOmBv+WFjemikee5geivt+axggogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmFkZHJlc3NMb29rdXBUaW1lb3V0KTsKICAgICAgICB0aGlzLmFkZHJlc3NMb29rdXBUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmdlb2NvZGVBZGRyZXNzKG5ld1ZhbHVlKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBsb2FkUmVzdGF1cmFudHMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3BvbnNlOwogICAgICAgIGlmICh0aGlzLnVzZXJSb2xlID09PSAnTWFuYWdlcicpIHsKICAgICAgICAgIC8vIE1hbmFnZXJzIGNhbiBzZWUgYWxsIHJlc3RhdXJhbnRzCiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2xpc3QnKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXNlclJvbGUgPT09ICdPd25lcicpIHsKICAgICAgICAgIC8vIE93bmVycyBjYW4gb25seSBzZWUgdGhlaXIgb3duIHJlc3RhdXJhbnRzCiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL293bmVyLyR7dGhpcy51c2VySWR9YCk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgcmVzdGF1cmFudHMnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyByZXN0YXVyYW50czonLCBlcnJvcik7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignRXJyb3IgbG9hZGluZyByZXN0YXVyYW50cycpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbG9hZE93bmVycygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygi5byA5aeL5Yqg6L296aSQ5Y6F5Lia5Li75YiX6KGoLi4uIik7CiAgICAgICAgLy8g5YWI5rWL6K+VQVBJ5piv5ZCm5Y+v55SoCiAgICAgICAgY29uc3QgdGVzdFJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3VzZXJzL3Rlc3QnKTsKICAgICAgICBjb25zb2xlLmxvZygiQVBJ5rWL6K+V57uT5p6cOiIsIHRlc3RSZXNwb25zZS5kYXRhKTsKCiAgICAgICAgLy8g6I635Y+W6KeS6Imy5Li6ICdPd25lcicg55qE55So5oi3CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvdXNlcnMvb3duZXJzJyk7CiAgICAgICAgY29uc29sZS5sb2coIuS4muS4u+WIl+ihqOWTjeW6lDoiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMub3duZXJzID0gcmVzcG9uc2UuZGF0YS5kYXRhIHx8IFtdOwogICAgICAgICAgY29uc29sZS5sb2coIuaIkOWKn+WKoOi9veS4muS4uzoiLCB0aGlzLm93bmVycyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHJlc3RhdXJhbnQgb3duZXJzOiAnICsgcmVzcG9uc2UuZGF0YS5tc2cpOwogICAgICAgICAgY29uc29sZS5lcnJvcigi5Yqg6L295Lia5Li75aSx6LSlOiIsIHJlc3BvbnNlLmRhdGEubXNnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi6ZSZ6K+v6K+m5oOFOiIsIGVycm9yKTsKICAgICAgICBjb25zb2xlLmVycm9yKCLor7fmsYJVUkw6IiwgZXJyb3IuY29uZmlnID8gZXJyb3IuY29uZmlnLnVybCA6ICLmnKrnn6UiKTsKICAgICAgICBjb25zb2xlLmVycm9yKCLlk43lupTnirbmgIE6IiwgZXJyb3IucmVzcG9uc2UgPyBlcnJvci5yZXNwb25zZS5zdGF0dXMgOiAi5pyq55+lIik7CiAgICAgICAgY29uc29sZS5lcnJvcigi5ZON5bqU5pWw5o2uOiIsIGVycm9yLnJlc3BvbnNlID8gZXJyb3IucmVzcG9uc2UuZGF0YSA6ICLmnKrnn6UiKTsKCiAgICAgICAgLy8g6K6+572u5LiA5Liq6buY6K6k5Lia5Li76YCJ6aG55Lul6YG/5YWN6aG16Z2i6ZSZ6K+vCiAgICAgICAgdGhpcy5vd25lcnMgPSBbewogICAgICAgICAgaWQ6IDcsCiAgICAgICAgICB1c2VybmFtZTogIum7mOiupOS4muS4uyAoSUQ6IDcpIgogICAgICAgIH1dOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHJlc3RhdXJhbnQgb3duZXJzOiAnICsgKGVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InKSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBzYXZlUmVzdGF1cmFudCgpIHsKICAgICAgLy8g6aqM6K+B5b+F5aGr5a2X5q61CiAgICAgIGlmICghdGhpcy5yZXN0YXVyYW50Rm9ybS5uYW1lIHx8ICF0aGlzLnJlc3RhdXJhbnRGb3JtLmFkZHJlc3MpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdQbGVhc2UgZmlsbCBpbiByZXN0YXVyYW50IG5hbWUgYW5kIGFkZHJlc3MnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOehruS/nW93bmVySWTmmK/mlbDlrZfnsbvlnosKICAgICAgaWYgKHRoaXMucmVzdGF1cmFudEZvcm0ub3duZXJJZCkgewogICAgICAgIHRoaXMucmVzdGF1cmFudEZvcm0ub3duZXJJZCA9IE51bWJlcih0aGlzLnJlc3RhdXJhbnRGb3JtLm93bmVySWQpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudXNlclJvbGUgPT09ICdPd25lcicpIHsKICAgICAgICAvLyDlpoLmnpzmmK/kuJrkuLvnlKjmiLfvvIzlsIZvd25lcklk6K6+572u5Li65b2T5YmN55So5oi3SUQKICAgICAgICB0aGlzLnJlc3RhdXJhbnRGb3JtLm93bmVySWQgPSBOdW1iZXIodGhpcy51c2VySWQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWmguaenOaYr+euoeeQhuWRmOS9huayoeaciemAieaLqeS4muS4u++8jOS9v+eUqOm7mOiupOS4muS4u0lECiAgICAgICAgdGhpcy5yZXN0YXVyYW50Rm9ybS5vd25lcklkID0gNzsKICAgICAgfQoKICAgICAgLy8g5YeG5aSH6KaB5Y+R6YCB55qE5pWw5o2uCiAgICAgIGxldCByZXN0YXVyYW50RGF0YSA9IHsKICAgICAgICAuLi50aGlzLnJlc3RhdXJhbnRGb3JtCiAgICAgIH07CgogICAgICAvLyDlpoLmnpzmmK/mlrDlop7ppJDljoXvvIzliKDpmaRpZOWtl+aute+8jOiuqeaVsOaNruW6k+iHquWKqOeUn+aIkAogICAgICBpZiAoIXRoaXMuZWRpdE1vZGUpIHsKICAgICAgICBkZWxldGUgcmVzdGF1cmFudERhdGEuaWQ7CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coIuWHhuWkh+S/neWtmOmkkOWOheaVsOaNrjoiLCByZXN0YXVyYW50RGF0YSk7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAvYWRkJzsKICAgICAgICBsZXQgbWV0aG9kID0gJ3Bvc3QnOwoKICAgICAgICAvLyDlpoLmnpznvJbovpHvvIzkvb/nlKh1cGRhdGXmjqXlj6MKICAgICAgICBpZiAodGhpcy5lZGl0TW9kZSkgewogICAgICAgICAgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91cGRhdGUnOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygi5Y+R6YCB6K+35rGC5YiwOiIsIHVybCk7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcyh7CiAgICAgICAgICBtZXRob2QsCiAgICAgICAgICB1cmwsCiAgICAgICAgICBkYXRhOiByZXN0YXVyYW50RGF0YQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCLkv53lrZjppJDljoXlk43lupQ6IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3ModGhpcy5lZGl0TW9kZSA/ICdSZXN0YXVyYW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyA6ICdSZXN0YXVyYW50IGFkZGVkIHN1Y2Nlc3NmdWxseScpOwogICAgICAgICAgdGhpcy5yZXNldEZvcm0oKTsKICAgICAgICAgIHRoaXMubG9hZFJlc3RhdXJhbnRzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tc2cgfHwgJ09wZXJhdGlvbiBmYWlsZWQnKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuaTjeS9nOWksei0pToiLCByZXNwb25zZS5kYXRhLm1zZyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHZhciBfZXJyb3IkcmVzcG9uc2U7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHJlc3RhdXJhbnQ6JywgZXJyb3IpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoIuivt+axguWksei0peivpuaDhToiLCBlcnJvci5yZXNwb25zZSA/IGVycm9yLnJlc3BvbnNlLmRhdGEgOiBlcnJvci5tZXNzYWdlKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdFcnJvciBzYXZpbmcgcmVzdGF1cmFudDogJyArICgoKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCB8fCAoX2Vycm9yJHJlc3BvbnNlID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlLm1zZykgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICB9CiAgICB9LAogICAgZWRpdFJlc3RhdXJhbnQocmVzdGF1cmFudCkgewogICAgICB0aGlzLmVkaXRNb2RlID0gdHJ1ZTsKICAgICAgdGhpcy5pc05ld1Jlc3RhdXJhbnQgPSBmYWxzZTsKCiAgICAgIC8vIENvcHkgdGhlIHJlc3RhdXJhbnQgZGF0YSB0byB0aGUgZm9ybQogICAgICB0aGlzLnJlc3RhdXJhbnRGb3JtID0gewogICAgICAgIC4uLnJlc3RhdXJhbnQKICAgICAgfTsKCiAgICAgIC8vIFNjcm9sbCB0byBmb3JtCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXN0YXVyYW50LWZvcm0nKTsKICAgICAgICBpZiAoZm9ybUVsZW1lbnQpIHsKICAgICAgICAgIGZvcm1FbGVtZW50LnNjcm9sbEludG9WaWV3KHsKICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZVJlc3RhdXJhbnQocmVzdGF1cmFudCkgewogICAgICB0cnkgewogICAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcmVzdGF1cmFudD8nKSkgewogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9kZWxldGUvJHtyZXN0YXVyYW50LmlkfWApOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnUmVzdGF1cmFudCBkZWxldGVkIHN1Y2Nlc3NmdWxseScpOwogICAgICAgICAgICB0aGlzLmxvYWRSZXN0YXVyYW50cygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1zZyB8fCAnRmFpbGVkIHRvIGRlbGV0ZSByZXN0YXVyYW50Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHJlc3RhdXJhbnQ6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHJlc3RhdXJhbnQnKTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy5yZXN0YXVyYW50Rm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBidXNpbmVzc0hvdXJzOiAnJywKICAgICAgICBzdHlsZTogJycsCiAgICAgICAgcHJpY2U6ICcnLAogICAgICAgIHNjb3JlOiAnMCcsCiAgICAgICAgaW1hZ2U6ICcnLAogICAgICAgIGxhdDogJycsCiAgICAgICAgbG5nOiAnJywKICAgICAgICBvd25lcklkOiB0aGlzLnVzZXJSb2xlID09PSAnT3duZXInID8gdGhpcy51c2VySWQgOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuZWRpdE1vZGUgPSBmYWxzZTsKICAgICAgdGhpcy5pc05ld1Jlc3RhdXJhbnQgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbEVkaXQoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICB9LAogICAgZ29CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgfSwKICAgIGluaXRpYWxpemVMb2NhdGlvblBpY2tlcigpIHsKICAgICAgLy8g5qOA5p+lR29vZ2xlIE1hcHMgQVBJ5piv5ZCm5bey5Yqg6L29CiAgICAgIGlmICh3aW5kb3cuZ29vZ2xlICYmIHdpbmRvdy5nb29nbGUubWFwcykgewogICAgICAgIHRoaXMuaW5pdE1hcCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWmguaenEdvb2dsZSBNYXBzIEFQSeWwmuacquWKoOi9ve+8jOa3u+WKoOmUmeivr+a2iOaBrwogICAgICAgIHRoaXMubWFwRXJyb3IgPSAnTG9hZGluZyBHb29nbGUgTWFwcy4uLic7CiAgICAgICAgY29uc29sZS5sb2coJ0dvb2dsZSBNYXBzIEFQSSBub3QgbG9hZGVkLCBhdHRlbXB0aW5nIHRvIGxvYWQnKTsKCiAgICAgICAgLy8g5bCd6K+V6YCa6L+H5Yqo5oCB5re75Yqg6ISa5pys5Yqg6L29CiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PUFJemFTeUNlSGZEYV9mQk4yTko3VGo2OHpJOFhqSkdNd19LNWQxOCZjYWxsYmFjaz1pbml0TG9jYXRpb25QaWNrZXJNYXAnOwogICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7CiAgICAgICAgc2NyaXB0LmRlZmVyID0gdHJ1ZTsKCiAgICAgICAgLy8g5YWo5bGA5Zue6LCD5Ye95pWwCiAgICAgICAgd2luZG93LmluaXRMb2NhdGlvblBpY2tlck1hcCA9ICgpID0+IHsKICAgICAgICAgIHRoaXMuaW5pdE1hcCgpOwogICAgICAgIH07CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9CiAgICB9LAogICAgaW5pdE1hcCgpIHsKICAgICAgY29uc3QgbWFwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvY2F0aW9uLXBpY2tlci1tYXAiKTsKICAgICAgaWYgKCFtYXBDb250YWluZXIpIHsKICAgICAgICB0aGlzLm1hcEVycm9yID0gJ01hcCBjb250YWluZXIgbm90IGZvdW5kJzsKICAgICAgICBjb25zb2xlLmVycm9yKCJNYXAgY29udGFpbmVyIG5vdCBmb3VuZCEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICAvLyDpu5jorqTkuK3lv4PkvY3nva4gLSDniLHlsJTlhbDkuK3lv4MKICAgICAgICBjb25zdCBjZW50ZXIgPSB7CiAgICAgICAgICBsYXQ6IDUzLjQxMjkxLAogICAgICAgICAgbG5nOiAtOC4yNDM4OQogICAgICAgIH07CgogICAgICAgIC8vIOWmguaenOihqOWNleS4reW3suaciee7j+e6rOW6pu+8jOS9v+eUqOihqOWNleS4reeahOWAvAogICAgICAgIGlmICh0aGlzLnJlc3RhdXJhbnRGb3JtLmxhdCAmJiB0aGlzLnJlc3RhdXJhbnRGb3JtLmxuZykgewogICAgICAgICAgY2VudGVyLmxhdCA9IHBhcnNlRmxvYXQodGhpcy5yZXN0YXVyYW50Rm9ybS5sYXQpOwogICAgICAgICAgY2VudGVyLmxuZyA9IHBhcnNlRmxvYXQodGhpcy5yZXN0YXVyYW50Rm9ybS5sbmcpOwogICAgICAgIH0KICAgICAgICB0aGlzLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAobWFwQ29udGFpbmVyLCB7CiAgICAgICAgICBjZW50ZXI6IGNlbnRlciwKICAgICAgICAgIHpvb206IDcKICAgICAgICB9KTsKCiAgICAgICAgLy8g5aaC5p6c6KGo5Y2V5Lit5bey5pyJ57uP57qs5bqm77yM5re75Yqg5qCH6K6wCiAgICAgICAgaWYgKHRoaXMucmVzdGF1cmFudEZvcm0ubGF0ICYmIHRoaXMucmVzdGF1cmFudEZvcm0ubG5nKSB7CiAgICAgICAgICB0aGlzLmFkZE1hcmtlcihjZW50ZXIpOwogICAgICAgIH0KCiAgICAgICAgLy8g5re75Yqg5Zyw5Zu+54K55Ye75LqL5Lu2CiAgICAgICAgdGhpcy5tYXAuYWRkTGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7CiAgICAgICAgICAgIGxhdDogZXZlbnQubGF0TG5nLmxhdCgpLAogICAgICAgICAgICBsbmc6IGV2ZW50LmxhdExuZy5sbmcoKQogICAgICAgICAgfTsKCiAgICAgICAgICAvLyDmm7TmlrDooajljZXkuK3nmoTnu4/nuqzluqYKICAgICAgICAgIHRoaXMucmVzdGF1cmFudEZvcm0ubGF0ID0gcG9zaXRpb24ubGF0LnRvRml4ZWQoNik7CiAgICAgICAgICB0aGlzLnJlc3RhdXJhbnRGb3JtLmxuZyA9IHBvc2l0aW9uLmxuZy50b0ZpeGVkKDYpOwoKICAgICAgICAgIC8vIOa3u+WKoOaIluabtOaWsOagh+iusAogICAgICAgICAgdGhpcy5hZGRNYXJrZXIocG9zaXRpb24pOwoKICAgICAgICAgIC8vIOWwneivleWPjeWQkeWcsOeQhue8lueggeiOt+WPluWcsOWdgAogICAgICAgICAgdGhpcy5yZXZlcnNlR2VvY29kZShwb3NpdGlvbik7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5tYXBFcnJvciA9IG51bGw7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5tYXBFcnJvciA9ICdNYXAgaW5pdGlhbGl6YXRpb24gZmFpbGVkOiAnICsgZXJyb3IubWVzc2FnZTsKICAgICAgICBjb25zb2xlLmVycm9yKCdNYXAgaW5pdGlhbGl6YXRpb24gZXJyb3I6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYWRkTWFya2VyKHBvc2l0aW9uKSB7CiAgICAgIC8vIOWmguaenOW3suacieagh+iusO+8jOWFiOenu+mZpAogICAgICBpZiAodGhpcy5tYXJrZXIpIHsKICAgICAgICB0aGlzLm1hcmtlci5zZXRNYXAobnVsbCk7CiAgICAgIH0KCiAgICAgIC8vIOWIm+W7uuaWsOagh+iusAogICAgICB0aGlzLm1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoewogICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbiwKICAgICAgICBtYXA6IHRoaXMubWFwLAogICAgICAgIGRyYWdnYWJsZTogdHJ1ZSwKICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QCiAgICAgIH0pOwoKICAgICAgLy8g5re75Yqg5ouW5ou95LqL5Lu2CiAgICAgIHRoaXMubWFya2VyLmFkZExpc3RlbmVyKCdkcmFnZW5kJywgZXZlbnQgPT4gewogICAgICAgIGNvbnN0IHBvc2l0aW9uID0gewogICAgICAgICAgbGF0OiBldmVudC5sYXRMbmcubGF0KCksCiAgICAgICAgICBsbmc6IGV2ZW50LmxhdExuZy5sbmcoKQogICAgICAgIH07CgogICAgICAgIC8vIOabtOaWsOihqOWNleS4reeahOe7j+e6rOW6pgogICAgICAgIHRoaXMucmVzdGF1cmFudEZvcm0ubGF0ID0gcG9zaXRpb24ubGF0LnRvRml4ZWQoNik7CiAgICAgICAgdGhpcy5yZXN0YXVyYW50Rm9ybS5sbmcgPSBwb3NpdGlvbi5sbmcudG9GaXhlZCg2KTsKCiAgICAgICAgLy8g5bCd6K+V5Y+N5ZCR5Zyw55CG57yW56CB6I635Y+W5Zyw5Z2ACiAgICAgICAgdGhpcy5yZXZlcnNlR2VvY29kZShwb3NpdGlvbik7CiAgICAgIH0pOwogICAgfSwKICAgIHJldmVyc2VHZW9jb2RlKHBvc2l0aW9uKSB7CiAgICAgIC8vIOS7heW9k+ihqOWNleWcsOWdgOS4uuepuuaIluWcsOWbvuebtOaOpeeCueWHu+aTjeS9nOaXtuaJjeWwneivleWPjeWQkeWcsOeQhue8lueggQogICAgICBpZiAoIXRoaXMucmVzdGF1cmFudEZvcm0uYWRkcmVzcyB8fCB0aGlzLnJlc3RhdXJhbnRGb3JtLmFkZHJlc3MudHJpbSgpID09PSAnJykgewogICAgICAgIGNvbnN0IGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7CiAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7CiAgICAgICAgICBsb2NhdGlvbjogcG9zaXRpb24KICAgICAgICB9LCAocmVzdWx0cywgc3RhdHVzKSA9PiB7CiAgICAgICAgICBpZiAoc3RhdHVzID09PSAnT0snICYmIHJlc3VsdHNbMF0pIHsKICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50Rm9ybS5hZGRyZXNzID0gcmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzczsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdlb2NvZGVBZGRyZXNzKGFkZHJlc3MpIHsKICAgICAgaWYgKHdpbmRvdy5nb29nbGUgJiYgd2luZG93Lmdvb2dsZS5tYXBzKSB7CiAgICAgICAgY29uc3QgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTsKICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsKICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3MKICAgICAgICB9LCAocmVzdWx0cywgc3RhdHVzKSA9PiB7CiAgICAgICAgICBpZiAoc3RhdHVzID09PSAnT0snICYmIHJlc3VsdHNbMF0pIHsKICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7CiAgICAgICAgICAgICAgbGF0OiByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLAogICAgICAgICAgICAgIGxuZzogcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8g5pu05paw6KGo5Y2V5Lit55qE57uP57qs5bqmCiAgICAgICAgICAgIHRoaXMucmVzdGF1cmFudEZvcm0ubGF0ID0gcG9zaXRpb24ubGF0LnRvRml4ZWQoNik7CiAgICAgICAgICAgIHRoaXMucmVzdGF1cmFudEZvcm0ubG5nID0gcG9zaXRpb24ubG5nLnRvRml4ZWQoNik7CgogICAgICAgICAgICAvLyDmt7vliqDmiJbmm7TmlrDmoIforrDlubbnp7vliqjlnLDlm74KICAgICAgICAgICAgdGhpcy5hZGRNYXJrZXIocG9zaXRpb24pOwogICAgICAgICAgICB0aGlzLm1hcC5zZXRDZW50ZXIocG9zaXRpb24pOwogICAgICAgICAgICB0aGlzLm1hcC5zZXRab29tKDE1KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG1hbmFnZU1lbnUocmVzdGF1cmFudCkgewogICAgICAvLyDlhYjkv53lrZjlvZPliY3pgInkuK3nmoTppJDljoVJROWIsOacrOWcsOWtmOWCqAogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRSZXN0YXVyYW50SWQnLCByZXN0YXVyYW50LmlkKTsKICAgICAgLy8g5a+86Iiq5Yiw6I+c5Y2V566h55CG6aG16Z2iCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbWVudS1tYW5hZ2VtZW50Jyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["axios","name","data","restaurants","owners","restaurantForm","id","address","businessHours","style","price","score","image","lat","lng","ownerId","editMode","isNewRestaurant","userRole","userId","map","marker","mapError","addressLookupTimeout","created","localStorage","getItem","loadRestaurants","loadOwners","mounted","initializeLocationPicker","$watch","newValue","length","clearTimeout","setTimeout","geocodeAddress","methods","response","get","code","$message","error","console","log","testResponse","msg","config","url","status","username","message","saveRestaurant","Number","restaurantData","method","success","resetForm","_error$response","editRestaurant","restaurant","$nextTick","formElement","document","querySelector","scrollIntoView","behavior","deleteRestaurant","confirm","delete","cancelEdit","goBack","$router","push","window","google","maps","initMap","script","createElement","src","async","defer","initLocationPickerMap","head","appendChild","mapContainer","getElementById","center","parseFloat","Map","zoom","addMarker","addListener","event","position","latLng","toFixed","reverseGeocode","setMap","Marker","draggable","animation","Animation","DROP","trim","geocoder","Geocoder","geocode","location","results","formatted_address","geometry","setCenter","setZoom","manageMenu","setItem"],"sources":["src/views/RestaurantManagement.vue"],"sourcesContent":["<template>\n  <div class=\"restaurant-management\">\n    <h2>Restaurant Management</h2>\n    \n    <!-- Restaurant Form -->\n    <div class=\"restaurant-form\">\n      <h3>{{ editMode ? 'Edit Restaurant' : 'Add New Restaurant' }}</h3>\n      <el-form :model=\"restaurantForm\" label-width=\"120px\">\n        <el-form-item label=\"Name\" required>\n          <el-input v-model=\"restaurantForm.name\" placeholder=\"Restaurant Name\"></el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"Address\" required>\n          <el-input v-model=\"restaurantForm.address\" placeholder=\"Restaurant Address\"></el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"Business Hours\">\n          <el-input v-model=\"restaurantForm.businessHours\" placeholder=\"e.g. 9:00-22:00\"></el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"Cuisine Type\">\n          <el-select v-model=\"restaurantForm.style\" placeholder=\"Select Cuisine Type\">\n            <el-option label=\"Chinese\" value=\"中餐\"></el-option>\n            <el-option label=\"Western\" value=\"西餐\"></el-option>\n            <el-option label=\"Japanese\" value=\"日料\"></el-option>\n            <el-option label=\"Home Style\" value=\"家常菜\"></el-option>\n          </el-select>\n        </el-form-item>\n        \n        <el-form-item label=\"Price Range\">\n          <el-select v-model=\"restaurantForm.price\" placeholder=\"Select Price Range\">\n            <el-option label=\"Low\" value=\"低\"></el-option>\n            <el-option label=\"Medium\" value=\"中\"></el-option>\n            <el-option label=\"High\" value=\"高\"></el-option>\n          </el-select>\n        </el-form-item>\n        \n        <el-form-item label=\"Image URL\">\n          <el-input v-model=\"restaurantForm.image\" placeholder=\"Restaurant Image URL\"></el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"Location\">\n          <div class=\"location-inputs\">\n            <el-input v-model=\"restaurantForm.lat\" placeholder=\"Latitude\" class=\"location-input\"></el-input>\n            <el-input v-model=\"restaurantForm.lng\" placeholder=\"Longitude\" class=\"location-input\"></el-input>\n          </div>\n          <div class=\"map-tip\">Tip: You can pick a location on the map to set coordinates</div>\n          \n          <!-- 地图选点组件 -->\n          <div class=\"map-container\">\n            <div id=\"location-picker-map\" style=\"height: 300px; width: 100%; margin-top: 10px;\"></div>\n            <div v-if=\"mapError\" class=\"map-error\">{{ mapError }}</div>\n          </div>\n        </el-form-item>\n        \n        <!-- Owner Selection (Only for Manager) -->\n        <el-form-item v-if=\"userRole === 'Manager'\" label=\"Owner\">\n          <el-select \n            v-model=\"restaurantForm.ownerId\" \n            placeholder=\"Select Restaurant Owner\"\n            filterable\n            :disabled=\"!isNewRestaurant\"\n          >\n            <el-option\n              v-for=\"owner in owners\"\n              :key=\"owner.id\"\n              :label=\"owner.username\"\n              :value=\"owner.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button type=\"primary\" @click=\"saveRestaurant\">Save</el-button>\n          <el-button @click=\"resetForm\">Reset</el-button>\n          <el-button v-if=\"editMode\" @click=\"cancelEdit\">Cancel</el-button>\n          <el-button type=\"warning\" @click=\"goBack\">Back to Home</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    \n    <!-- Restaurant List -->\n    <div class=\"restaurant-list\">\n      <h3>Your Restaurants</h3>\n      <el-table :data=\"restaurants\" style=\"width: 100%\">\n        <el-table-column prop=\"name\" label=\"Name\"></el-table-column>\n        <el-table-column prop=\"address\" label=\"Address\"></el-table-column>\n        <el-table-column prop=\"style\" label=\"Cuisine Type\"></el-table-column>\n        <el-table-column prop=\"price\" label=\"Price Range\"></el-table-column>\n        <el-table-column prop=\"score\" label=\"Rating\"></el-table-column>\n        <el-table-column label=\"Actions\" width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" @click=\"editRestaurant(scope.row)\">Edit</el-button>\n            <el-button \n              size=\"mini\" \n              type=\"danger\" \n              @click=\"deleteRestaurant(scope.row)\"\n              v-if=\"userRole === 'Manager'\"\n            >Delete</el-button>\n            <el-button \n              size=\"mini\" \n              type=\"success\" \n              @click=\"manageMenu(scope.row)\"\n            >Menu</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'RestaurantManagement',\n  data() {\n    return {\n      restaurants: [],\n      owners: [],\n      restaurantForm: {\n        id: null,\n        name: '',\n        address: '',\n        businessHours: '',\n        style: '',\n        price: '',\n        score: '0',\n        image: '',\n        lat: '',\n        lng: '',\n        ownerId: null\n      },\n      editMode: false,\n      isNewRestaurant: true,\n      userRole: '',\n      userId: null,\n      map: null,\n      marker: null,\n      mapError: null,\n      addressLookupTimeout: null\n    };\n  },\n  created() {\n    // Get user info from localStorage\n    this.userRole = localStorage.getItem('userRole');\n    this.userId = localStorage.getItem('userId');\n    \n    // Load restaurants based on role\n    this.loadRestaurants();\n    \n    // If manager, load owners for selection\n    if (this.userRole === 'Manager') {\n      this.loadOwners();\n    } else if (this.userRole === 'Owner') {\n      // If owner, set ownerId to current user\n      this.restaurantForm.ownerId = this.userId;\n    }\n  },\n  mounted() {\n    // 初始化地图选点器\n    this.initializeLocationPicker();\n    \n    // 当地址改变时，尝试自动定位\n    this.$watch('restaurantForm.address', (newValue) => {\n      if (newValue && newValue.length > 5) {\n        // 使用防抖，避免频繁请求\n        clearTimeout(this.addressLookupTimeout);\n        this.addressLookupTimeout = setTimeout(() => {\n          this.geocodeAddress(newValue);\n        }, 1000);\n      }\n    });\n  },\n  methods: {\n    async loadRestaurants() {\n      try {\n        let response;\n        \n        if (this.userRole === 'Manager') {\n          // Managers can see all restaurants\n          response = await axios.get('http://localhost:8080/list');\n        } else if (this.userRole === 'Owner') {\n          // Owners can only see their own restaurants\n          response = await axios.get(`http://localhost:8080/owner/${this.userId}`);\n        }\n        \n        if (response.data.code === 200) {\n          this.restaurants = response.data.data;\n        } else {\n          this.$message.error('Failed to load restaurants');\n        }\n      } catch (error) {\n        console.error('Error loading restaurants:', error);\n        this.$message.error('Error loading restaurants');\n      }\n    },\n    \n    async loadOwners() {\n      try {\n        console.log(\"开始加载餐厅业主列表...\");\n        // 先测试API是否可用\n        const testResponse = await axios.get('http://localhost:8080/api/users/test');\n        console.log(\"API测试结果:\", testResponse.data);\n        \n        // 获取角色为 'Owner' 的用户\n        const response = await axios.get('http://localhost:8080/api/users/owners');\n        console.log(\"业主列表响应:\", response.data);\n        \n        if (response.data.code === 200) {\n          this.owners = response.data.data || [];\n          console.log(\"成功加载业主:\", this.owners);\n        } else {\n          this.$message.error('Failed to load restaurant owners: ' + response.data.msg);\n          console.error(\"加载业主失败:\", response.data.msg);\n        }\n      } catch (error) {\n        console.error(\"错误详情:\", error);\n        console.error(\"请求URL:\", error.config ? error.config.url : \"未知\");\n        console.error(\"响应状态:\", error.response ? error.response.status : \"未知\");\n        console.error(\"响应数据:\", error.response ? error.response.data : \"未知\");\n        \n        // 设置一个默认业主选项以避免页面错误\n        this.owners = [{ id: 7, username: \"默认业主 (ID: 7)\" }];\n        this.$message.error('Failed to load restaurant owners: ' + (error.message || 'Unknown error'));\n      }\n    },\n    \n    async saveRestaurant() {\n      // 验证必填字段\n      if (!this.restaurantForm.name || !this.restaurantForm.address) {\n        this.$message.error('Please fill in restaurant name and address');\n        return;\n      }\n      \n      // 确保ownerId是数字类型\n      if (this.restaurantForm.ownerId) {\n        this.restaurantForm.ownerId = Number(this.restaurantForm.ownerId);\n      } else if (this.userRole === 'Owner') {\n        // 如果是业主用户，将ownerId设置为当前用户ID\n        this.restaurantForm.ownerId = Number(this.userId);\n      } else {\n        // 如果是管理员但没有选择业主，使用默认业主ID\n        this.restaurantForm.ownerId = 7;\n      }\n      \n      // 准备要发送的数据\n      let restaurantData = {...this.restaurantForm};\n      \n      // 如果是新增餐厅，删除id字段，让数据库自动生成\n      if (!this.editMode) {\n        delete restaurantData.id;\n      }\n      \n      console.log(\"准备保存餐厅数据:\", restaurantData);\n      \n      try {\n        let url = 'http://localhost:8080/add';\n        let method = 'post';\n        \n        // 如果编辑，使用update接口\n        if (this.editMode) {\n          url = 'http://localhost:8080/update';\n        }\n        \n        console.log(\"发送请求到:\", url);\n        const response = await axios({\n          method,\n          url,\n          data: restaurantData\n        });\n        \n        console.log(\"保存餐厅响应:\", response.data);\n        \n        if (response.data.code === 200) {\n          this.$message.success(this.editMode ? 'Restaurant updated successfully' : 'Restaurant added successfully');\n          this.resetForm();\n          this.loadRestaurants();\n        } else {\n          this.$message.error(response.data.msg || 'Operation failed');\n          console.error(\"操作失败:\", response.data.msg);\n        }\n      } catch (error) {\n        console.error('Error saving restaurant:', error);\n        console.error(\"请求失败详情:\", error.response ? error.response.data : error.message);\n        this.$message.error('Error saving restaurant: ' + (error.response?.data?.msg || error.message));\n      }\n    },\n    \n    editRestaurant(restaurant) {\n      this.editMode = true;\n      this.isNewRestaurant = false;\n      \n      // Copy the restaurant data to the form\n      this.restaurantForm = { ...restaurant };\n      \n      // Scroll to form\n      this.$nextTick(() => {\n        const formElement = document.querySelector('.restaurant-form');\n        if (formElement) {\n          formElement.scrollIntoView({ behavior: 'smooth' });\n        }\n      });\n    },\n    \n    async deleteRestaurant(restaurant) {\n      try {\n        if (confirm('Are you sure you want to delete this restaurant?')) {\n          const response = await axios.delete(`http://localhost:8080/delete/${restaurant.id}`);\n          \n          if (response.data.code === 200) {\n            this.$message.success('Restaurant deleted successfully');\n            this.loadRestaurants();\n          } else {\n            this.$message.error(response.data.msg || 'Failed to delete restaurant');\n          }\n        }\n      } catch (error) {\n        console.error('Error deleting restaurant:', error);\n        this.$message.error('Error deleting restaurant');\n      }\n    },\n    \n    resetForm() {\n      this.restaurantForm = {\n        id: null,\n        name: '',\n        address: '',\n        businessHours: '',\n        style: '',\n        price: '',\n        score: '0',\n        image: '',\n        lat: '',\n        lng: '',\n        ownerId: this.userRole === 'Owner' ? this.userId : null\n      };\n      this.editMode = false;\n      this.isNewRestaurant = true;\n    },\n    \n    cancelEdit() {\n      this.resetForm();\n    },\n    \n    goBack() {\n      this.$router.push('/');\n    },\n    \n    initializeLocationPicker() {\n      // 检查Google Maps API是否已加载\n      if (window.google && window.google.maps) {\n        this.initMap();\n      } else {\n        // 如果Google Maps API尚未加载，添加错误消息\n        this.mapError = 'Loading Google Maps...';\n        console.log('Google Maps API not loaded, attempting to load');\n        \n        // 尝试通过动态添加脚本加载\n        const script = document.createElement('script');\n        script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCeHfDa_fBN2NJ7Tj68zI8XjJGMw_K5d18&callback=initLocationPickerMap';\n        script.async = true;\n        script.defer = true;\n        \n        // 全局回调函数\n        window.initLocationPickerMap = () => {\n          this.initMap();\n        };\n        \n        document.head.appendChild(script);\n      }\n    },\n    \n    initMap() {\n      const mapContainer = document.getElementById(\"location-picker-map\");\n      if (!mapContainer) {\n        this.mapError = 'Map container not found';\n        console.error(\"Map container not found!\");\n        return;\n      }\n\n      try {\n        // 默认中心位置 - 爱尔兰中心\n        const center = { lat: 53.41291, lng: -8.24389 };\n        \n        // 如果表单中已有经纬度，使用表单中的值\n        if (this.restaurantForm.lat && this.restaurantForm.lng) {\n          center.lat = parseFloat(this.restaurantForm.lat);\n          center.lng = parseFloat(this.restaurantForm.lng);\n        }\n        \n        this.map = new google.maps.Map(mapContainer, {\n          center: center,\n          zoom: 7\n        });\n\n        // 如果表单中已有经纬度，添加标记\n        if (this.restaurantForm.lat && this.restaurantForm.lng) {\n          this.addMarker(center);\n        }\n\n        // 添加地图点击事件\n        this.map.addListener('click', (event) => {\n          const position = {\n            lat: event.latLng.lat(),\n            lng: event.latLng.lng()\n          };\n          \n          // 更新表单中的经纬度\n          this.restaurantForm.lat = position.lat.toFixed(6);\n          this.restaurantForm.lng = position.lng.toFixed(6);\n          \n          // 添加或更新标记\n          this.addMarker(position);\n          \n          // 尝试反向地理编码获取地址\n          this.reverseGeocode(position);\n        });\n        \n        this.mapError = null;\n      } catch (error) {\n        this.mapError = 'Map initialization failed: ' + error.message;\n        console.error('Map initialization error:', error);\n      }\n    },\n    \n    addMarker(position) {\n      // 如果已有标记，先移除\n      if (this.marker) {\n        this.marker.setMap(null);\n      }\n      \n      // 创建新标记\n      this.marker = new google.maps.Marker({\n        position: position,\n        map: this.map,\n        draggable: true,\n        animation: google.maps.Animation.DROP\n      });\n      \n      // 添加拖拽事件\n      this.marker.addListener('dragend', (event) => {\n        const position = {\n          lat: event.latLng.lat(),\n          lng: event.latLng.lng()\n        };\n        \n        // 更新表单中的经纬度\n        this.restaurantForm.lat = position.lat.toFixed(6);\n        this.restaurantForm.lng = position.lng.toFixed(6);\n        \n        // 尝试反向地理编码获取地址\n        this.reverseGeocode(position);\n      });\n    },\n    \n    reverseGeocode(position) {\n      // 仅当表单地址为空或地图直接点击操作时才尝试反向地理编码\n      if (!this.restaurantForm.address || this.restaurantForm.address.trim() === '') {\n        const geocoder = new google.maps.Geocoder();\n        geocoder.geocode({ location: position }, (results, status) => {\n          if (status === 'OK' && results[0]) {\n            this.restaurantForm.address = results[0].formatted_address;\n          }\n        });\n      }\n    },\n    \n    geocodeAddress(address) {\n      if (window.google && window.google.maps) {\n        const geocoder = new google.maps.Geocoder();\n        geocoder.geocode({ address: address }, (results, status) => {\n          if (status === 'OK' && results[0]) {\n            const position = {\n              lat: results[0].geometry.location.lat(),\n              lng: results[0].geometry.location.lng()\n            };\n            \n            // 更新表单中的经纬度\n            this.restaurantForm.lat = position.lat.toFixed(6);\n            this.restaurantForm.lng = position.lng.toFixed(6);\n            \n            // 添加或更新标记并移动地图\n            this.addMarker(position);\n            this.map.setCenter(position);\n            this.map.setZoom(15);\n          }\n        });\n      }\n    },\n    \n    manageMenu(restaurant) {\n      // 先保存当前选中的餐厅ID到本地存储\n      localStorage.setItem('selectedRestaurantId', restaurant.id);\n      // 导航到菜单管理页面\n      this.$router.push('/menu-management');\n    },\n  }\n};\n</script>\n\n<style scoped>\n.restaurant-management {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #333;\n}\n\nh3 {\n  margin-bottom: 15px;\n  color: #666;\n}\n\n.restaurant-form {\n  background: #f9f9f9;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 30px;\n}\n\n.location-inputs {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n\n.location-input {\n  width: 50%;\n}\n\n.map-container {\n  position: relative;\n  margin-top: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.map-error {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgba(255, 0, 0, 0.7);\n  color: white;\n  padding: 8px 16px;\n  border-radius: 4px;\n}\n\n.map-tip {\n  color: #909399;\n  font-size: 12px;\n  margin-bottom: 5px;\n}\n\n.restaurant-list {\n  margin-top: 30px;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}