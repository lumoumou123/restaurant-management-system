{"remainingRequest":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18167\\Desktop\\final year\\big-data\\src\\views\\Menu.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\src\\views\\Menu.vue","mtime":1742915659565},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\babel.config.js","mtime":1725678814000},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742859679583},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\babel-loader\\lib\\index.js","mtime":1742859682775},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742859679583},{"path":"C:\\Users\\18167\\Desktop\\final year\\big-data\\node_modules\\vue-loader\\lib\\index.js","mtime":1742859683968}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNZW51JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzdGF1cmFudHM6IFtdLAogICAgICBtZW51SXRlbXM6IFtdLAogICAgICBmaWx0ZXJlZE1lbnVJdGVtczogW10sCiAgICAgIHNlbGVjdGVkUmVzdGF1cmFudElkOiBudWxsLAogICAgICBjYXRlZ29yeUZpbHRlcjogJycsCiAgICAgIGVkaXRNb2RlOiBmYWxzZSwKICAgICAgbWVudUl0ZW1Gb3JtOiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgcmVzdGF1cmFudElkOiBudWxsLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBwcmljZTogMCwKICAgICAgICBjYXRlZ29yeTogJycsCiAgICAgICAgaW1hZ2U6ICcnLAogICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlCiAgICAgIH0sCiAgICAgIHVzZXJSb2xlOiAnJywKICAgICAgdXNlcklkOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGF2YWlsYWJsZUNhdGVnb3JpZXMoKSB7CiAgICAgIC8vIOaPkOWPluaJgOacieS4jemHjeWkjeeahOWIhuexuwogICAgICBjb25zdCBjYXRlZ29yaWVzID0gdGhpcy5tZW51SXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5jYXRlZ29yeSkuZmlsdGVyKGNhdGVnb3J5ID0+IGNhdGVnb3J5KTsgLy8g6L+H5ruk5o6J56m65YC8CgogICAgICAvLyDov5Tlm57ljrvph43lkI7nmoTliIbnsbsKICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KGNhdGVnb3JpZXMpXTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDojrflj5bnlKjmiLfkv6Hmga8KICAgIHRoaXMudXNlclJvbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclJvbGUnKTsKICAgIHRoaXMudXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwoKICAgIC8vIOWKoOi9vemkkOWOheWIl+ihqAogICAgdGhpcy5sb2FkUmVzdGF1cmFudHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvYWRSZXN0YXVyYW50cygpIHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgcmVzcG9uc2U7CiAgICAgICAgaWYgKHRoaXMudXNlclJvbGUgPT09ICdNYW5hZ2VyJykgewogICAgICAgICAgLy8g566h55CG5ZGY5Y+v5Lul55yL5Yiw5omA5pyJ6aSQ5Y6FCiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2xpc3QnKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXNlclJvbGUgPT09ICdPd25lcicpIHsKICAgICAgICAgIC8vIOS4muS4u+WPquiDveeci+WIsOiHquW3seeahOmkkOWOhQogICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9vd25lci8ke3RoaXMudXNlcklkfWApOwogICAgICAgIH0KICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMucmVzdGF1cmFudHMgPSByZXNwb25zZS5kYXRhLmRhdGE7CgogICAgICAgICAgLy8g5aaC5p6c5Y+q5pyJ5LiA5Liq6aSQ5Y6F77yM6Ieq5Yqo6YCJ5oup5a6DCiAgICAgICAgICBpZiAodGhpcy5yZXN0YXVyYW50cy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlc3RhdXJhbnRJZCA9IHRoaXMucmVzdGF1cmFudHNbMF0uaWQ7CiAgICAgICAgICAgIHRoaXMubG9hZE1lbnUoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgcmVzdGF1cmFudHMnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyByZXN0YXVyYW50czonLCBlcnJvcik7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignRXJyb3IgbG9hZGluZyByZXN0YXVyYW50cycpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbG9hZE1lbnUoKSB7CiAgICAgIGlmICghdGhpcy5zZWxlY3RlZFJlc3RhdXJhbnRJZCkgcmV0dXJuOwogICAgICB0cnkgewogICAgICAgIHRoaXMubWVudUl0ZW1Gb3JtLnJlc3RhdXJhbnRJZCA9IHRoaXMuc2VsZWN0ZWRSZXN0YXVyYW50SWQ7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9tZW51L3Jlc3RhdXJhbnQvJHt0aGlzLnNlbGVjdGVkUmVzdGF1cmFudElkfWApOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5tZW51SXRlbXMgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICB0aGlzLmZpbHRlckJ5Q2F0ZWdvcnkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1zZyB8fCAnRmFpbGVkIHRvIGxvYWQgbWVudSBpdGVtcycpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIG1lbnU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgbWVudSBpdGVtcycpOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyQnlDYXRlZ29yeSgpIHsKICAgICAgaWYgKCF0aGlzLmNhdGVnb3J5RmlsdGVyKSB7CiAgICAgICAgdGhpcy5maWx0ZXJlZE1lbnVJdGVtcyA9IHRoaXMubWVudUl0ZW1zOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmlsdGVyZWRNZW51SXRlbXMgPSB0aGlzLm1lbnVJdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmNhdGVnb3J5ID09PSB0aGlzLmNhdGVnb3J5RmlsdGVyKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHNhdmVNZW51SXRlbSgpIHsKICAgICAgLy8g6aqM6K+B5b+F5aGr5a2X5q61CiAgICAgIGlmICghdGhpcy5tZW51SXRlbUZvcm0ubmFtZSB8fCB0aGlzLm1lbnVJdGVtRm9ybS5wcmljZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ1BsZWFzZSBmaWxsIGluIGl0ZW0gbmFtZSBhbmQgcHJpY2UnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOehruS/nemkkOWOhUlE5bey6K6+572uCiAgICAgIHRoaXMubWVudUl0ZW1Gb3JtLnJlc3RhdXJhbnRJZCA9IHRoaXMuc2VsZWN0ZWRSZXN0YXVyYW50SWQ7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAvbWVudS9hZGQnOwogICAgICAgIGxldCBtZXRob2QgPSAncG9zdCc7CgogICAgICAgIC8vIOWmguaenOaYr+e8lui+ke+8jOS9v+eUqOabtOaWsOaOpeWPowogICAgICAgIGlmICh0aGlzLmVkaXRNb2RlKSB7CiAgICAgICAgICB1cmwgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL21lbnUvdXBkYXRlJzsKICAgICAgICB9CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcyh7CiAgICAgICAgICBtZXRob2QsCiAgICAgICAgICB1cmwsCiAgICAgICAgICBkYXRhOiB0aGlzLm1lbnVJdGVtRm9ybQogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHRoaXMuZWRpdE1vZGUgPyAnTWVudSBpdGVtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyA6ICdNZW51IGl0ZW0gYWRkZWQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybSgpOwogICAgICAgICAgdGhpcy5sb2FkTWVudSgpOyAvLyDph43mlrDliqDovb3oj5zljZUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1zZyB8fCAnT3BlcmF0aW9uIGZhaWxlZCcpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgbWVudSBpdGVtOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdFcnJvciBzYXZpbmcgbWVudSBpdGVtJyk7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0TWVudUl0ZW0obWVudUl0ZW0pIHsKICAgICAgdGhpcy5lZGl0TW9kZSA9IHRydWU7CiAgICAgIHRoaXMubWVudUl0ZW1Gb3JtID0gewogICAgICAgIC4uLm1lbnVJdGVtCiAgICAgIH07CgogICAgICAvLyDmu5rliqjliLDooajljZXljLrln58KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtZm9ybScpOwogICAgICAgIGlmIChmb3JtRWxlbWVudCkgewogICAgICAgICAgZm9ybUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoewogICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRlTWVudUl0ZW0obWVudUl0ZW0pIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIG1lbnUgaXRlbT8nKSkgewogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9tZW51L2RlbGV0ZS8ke21lbnVJdGVtLmlkfWApOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnTWVudSBpdGVtIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgICAgIHRoaXMubG9hZE1lbnUoKTsgLy8g6YeN5paw5Yqg6L296I+c5Y2VCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGEubXNnIHx8ICdGYWlsZWQgdG8gZGVsZXRlIG1lbnUgaXRlbScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBtZW51IGl0ZW06JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIG1lbnUgaXRlbScpOwogICAgICB9CiAgICB9LAogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLm1lbnVJdGVtRm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICByZXN0YXVyYW50SWQ6IHRoaXMuc2VsZWN0ZWRSZXN0YXVyYW50SWQsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIHByaWNlOiAwLAogICAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgICBpbWFnZTogJycsCiAgICAgICAgaXNBdmFpbGFibGU6IHRydWUKICAgICAgfTsKICAgICAgdGhpcy5lZGl0TW9kZSA9IGZhbHNlOwogICAgfSwKICAgIGNhbmNlbEVkaXQoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICB9LAogICAgZ29CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Jlc3RhdXJhbnQtbWFuYWdlbWVudCcpOwogICAgfSwKICAgIGdldFJvd0NsYXNzTmFtZSh7CiAgICAgIHJvdwogICAgfSkgewogICAgICByZXR1cm4gcm93LmlzQXZhaWxhYmxlID8gJycgOiAndW5hdmFpbGFibGUtaXRlbSc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["axios","name","data","restaurants","menuItems","filteredMenuItems","selectedRestaurantId","categoryFilter","editMode","menuItemForm","id","restaurantId","description","price","category","image","isAvailable","userRole","userId","computed","availableCategories","categories","map","item","filter","Set","created","localStorage","getItem","loadRestaurants","methods","response","get","code","length","loadMenu","$message","error","console","filterByCategory","msg","saveMenuItem","url","method","success","resetForm","editMenuItem","menuItem","$nextTick","formElement","document","querySelector","scrollIntoView","behavior","deleteMenuItem","confirm","delete","cancelEdit","goBack","$router","push","getRowClassName","row"],"sources":["src/views/Menu.vue"],"sourcesContent":["<template>\r\n  <div class=\"menu-management\">\r\n    <h2>Restaurant Menu Management</h2>\r\n    \r\n    <div class=\"restaurant-selector\">\r\n      <el-select \r\n        v-model=\"selectedRestaurantId\" \r\n        placeholder=\"Select a restaurant\" \r\n        @change=\"loadMenu\"\r\n        style=\"width: 100%;\"\r\n      >\r\n        <el-option \r\n          v-for=\"restaurant in restaurants\" \r\n          :key=\"restaurant.id\" \r\n          :label=\"restaurant.name\" \r\n          :value=\"restaurant.id\"\r\n        ></el-option>\r\n      </el-select>\r\n    </div>\r\n    \r\n    <div v-if=\"selectedRestaurantId\" class=\"menu-content\">\r\n      <!-- Menu Item Form -->\r\n      <div class=\"menu-form\">\r\n        <h3>{{ editMode ? 'Edit Menu Item' : 'Add New Menu Item' }}</h3>\r\n        <el-form :model=\"menuItemForm\" label-width=\"120px\">\r\n          <el-form-item label=\"Name\" required>\r\n            <el-input v-model=\"menuItemForm.name\" placeholder=\"Item Name\"></el-input>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"Description\">\r\n            <el-input \r\n              v-model=\"menuItemForm.description\" \r\n              type=\"textarea\" \r\n              :rows=\"3\" \r\n              placeholder=\"Item Description\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"Price\" required>\r\n            <el-input-number \r\n              v-model=\"menuItemForm.price\" \r\n              :precision=\"2\" \r\n              :step=\"0.5\" \r\n              :min=\"0\"\r\n              style=\"width: 200px;\"\r\n            ></el-input-number>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"Category\">\r\n            <el-select v-model=\"menuItemForm.category\" placeholder=\"Select Category\">\r\n              <el-option label=\"Appetizer\" value=\"Appetizer\"></el-option>\r\n              <el-option label=\"Main Course\" value=\"Main Course\"></el-option>\r\n              <el-option label=\"Dessert\" value=\"Dessert\"></el-option>\r\n              <el-option label=\"Beverage\" value=\"Beverage\"></el-option>\r\n              <el-option label=\"Special\" value=\"Special\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"Image URL\">\r\n            <el-input v-model=\"menuItemForm.image\" placeholder=\"Item Image URL\"></el-input>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"Available\">\r\n            <el-switch v-model=\"menuItemForm.isAvailable\"></el-switch>\r\n          </el-form-item>\r\n          \r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"saveMenuItem\">Save</el-button>\r\n            <el-button @click=\"resetForm\">Reset</el-button>\r\n            <el-button v-if=\"editMode\" @click=\"cancelEdit\">Cancel</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      \r\n      <!-- Menu Items List -->\r\n      <div class=\"menu-list\">\r\n        <h3>Menu Items</h3>\r\n        \r\n        <div class=\"category-filters\">\r\n          <el-radio-group v-model=\"categoryFilter\" @change=\"filterByCategory\">\r\n            <el-radio-button label=\"\">All</el-radio-button>\r\n            <el-radio-button \r\n              v-for=\"category in availableCategories\" \r\n              :key=\"category\" \r\n              :label=\"category\"\r\n            >{{ category }}</el-radio-button>\r\n          </el-radio-group>\r\n        </div>\r\n        \r\n        <div v-if=\"filteredMenuItems.length === 0\" class=\"no-items\">\r\n          <p>No menu items found. Add your first item above!</p>\r\n        </div>\r\n        \r\n        <el-table \r\n          v-else \r\n          :data=\"filteredMenuItems\" \r\n          style=\"width: 100%\"\r\n          :row-class-name=\"getRowClassName\"\r\n        >\r\n          <el-table-column prop=\"name\" label=\"Name\" min-width=\"150\"></el-table-column>\r\n          <el-table-column prop=\"description\" label=\"Description\" min-width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"description-text\">{{ scope.row.description || 'No description' }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"price\" label=\"Price\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              €{{ scope.row.price.toFixed(2) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"category\" label=\"Category\" width=\"120\"></el-table-column>\r\n          <el-table-column prop=\"isAvailable\" label=\"Available\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"scope.row.isAvailable ? 'success' : 'danger'\">\r\n                {{ scope.row.isAvailable ? 'Yes' : 'No' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Actions\" width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" @click=\"editMenuItem(scope.row)\">Edit</el-button>\r\n              <el-button size=\"mini\" type=\"danger\" @click=\"deleteMenuItem(scope.row)\">Delete</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-else class=\"no-restaurant-selected\">\r\n      <p>Please select a restaurant to manage its menu</p>\r\n    </div>\r\n    \r\n    <div class=\"actions-bar\">\r\n      <el-button type=\"warning\" @click=\"goBack\">Back to Restaurant Management</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'Menu',\r\n  data() {\r\n    return {\r\n      restaurants: [],\r\n      menuItems: [],\r\n      filteredMenuItems: [],\r\n      selectedRestaurantId: null,\r\n      categoryFilter: '',\r\n      editMode: false,\r\n      menuItemForm: {\r\n        id: null,\r\n        restaurantId: null,\r\n        name: '',\r\n        description: '',\r\n        price: 0,\r\n        category: '',\r\n        image: '',\r\n        isAvailable: true\r\n      },\r\n      userRole: '',\r\n      userId: null\r\n    };\r\n  },\r\n  computed: {\r\n    availableCategories() {\r\n      // 提取所有不重复的分类\r\n      const categories = this.menuItems\r\n        .map(item => item.category)\r\n        .filter(category => category); // 过滤掉空值\r\n      \r\n      // 返回去重后的分类\r\n      return [...new Set(categories)];\r\n    }\r\n  },\r\n  created() {\r\n    // 获取用户信息\r\n    this.userRole = localStorage.getItem('userRole');\r\n    this.userId = localStorage.getItem('userId');\r\n    \r\n    // 加载餐厅列表\r\n    this.loadRestaurants();\r\n  },\r\n  methods: {\r\n    async loadRestaurants() {\r\n      try {\r\n        let response;\r\n        \r\n        if (this.userRole === 'Manager') {\r\n          // 管理员可以看到所有餐厅\r\n          response = await axios.get('http://localhost:8080/list');\r\n        } else if (this.userRole === 'Owner') {\r\n          // 业主只能看到自己的餐厅\r\n          response = await axios.get(`http://localhost:8080/owner/${this.userId}`);\r\n        }\r\n        \r\n        if (response && response.data.code === 200) {\r\n          this.restaurants = response.data.data;\r\n          \r\n          // 如果只有一个餐厅，自动选择它\r\n          if (this.restaurants.length === 1) {\r\n            this.selectedRestaurantId = this.restaurants[0].id;\r\n            this.loadMenu();\r\n          }\r\n        } else {\r\n          this.$message.error('Failed to load restaurants');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading restaurants:', error);\r\n        this.$message.error('Error loading restaurants');\r\n      }\r\n    },\r\n    \r\n    async loadMenu() {\r\n      if (!this.selectedRestaurantId) return;\r\n      \r\n      try {\r\n        this.menuItemForm.restaurantId = this.selectedRestaurantId;\r\n        \r\n        const response = await axios.get(`http://localhost:8080/menu/restaurant/${this.selectedRestaurantId}`);\r\n        \r\n        if (response.data.code === 200) {\r\n          this.menuItems = response.data.data;\r\n          this.filterByCategory();\r\n        } else {\r\n          this.$message.error(response.data.msg || 'Failed to load menu items');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading menu:', error);\r\n        this.$message.error('Error loading menu items');\r\n      }\r\n    },\r\n    \r\n    filterByCategory() {\r\n      if (!this.categoryFilter) {\r\n        this.filteredMenuItems = this.menuItems;\r\n      } else {\r\n        this.filteredMenuItems = this.menuItems.filter(item => \r\n          item.category === this.categoryFilter\r\n        );\r\n      }\r\n    },\r\n    \r\n    async saveMenuItem() {\r\n      // 验证必填字段\r\n      if (!this.menuItemForm.name || this.menuItemForm.price === null) {\r\n        this.$message.error('Please fill in item name and price');\r\n        return;\r\n      }\r\n      \r\n      // 确保餐厅ID已设置\r\n      this.menuItemForm.restaurantId = this.selectedRestaurantId;\r\n      \r\n      try {\r\n        let url = 'http://localhost:8080/menu/add';\r\n        let method = 'post';\r\n        \r\n        // 如果是编辑，使用更新接口\r\n        if (this.editMode) {\r\n          url = 'http://localhost:8080/menu/update';\r\n        }\r\n        \r\n        const response = await axios({\r\n          method,\r\n          url,\r\n          data: this.menuItemForm\r\n        });\r\n        \r\n        if (response.data.code === 200) {\r\n          this.$message.success(this.editMode ? 'Menu item updated successfully' : 'Menu item added successfully');\r\n          this.resetForm();\r\n          this.loadMenu(); // 重新加载菜单\r\n        } else {\r\n          this.$message.error(response.data.msg || 'Operation failed');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error saving menu item:', error);\r\n        this.$message.error('Error saving menu item');\r\n      }\r\n    },\r\n    \r\n    editMenuItem(menuItem) {\r\n      this.editMode = true;\r\n      this.menuItemForm = { ...menuItem };\r\n      \r\n      // 滚动到表单区域\r\n      this.$nextTick(() => {\r\n        const formElement = document.querySelector('.menu-form');\r\n        if (formElement) {\r\n          formElement.scrollIntoView({ behavior: 'smooth' });\r\n        }\r\n      });\r\n    },\r\n    \r\n    async deleteMenuItem(menuItem) {\r\n      try {\r\n        if (confirm('Are you sure you want to delete this menu item?')) {\r\n          const response = await axios.delete(`http://localhost:8080/menu/delete/${menuItem.id}`);\r\n          \r\n          if (response.data.code === 200) {\r\n            this.$message.success('Menu item deleted successfully');\r\n            this.loadMenu(); // 重新加载菜单\r\n          } else {\r\n            this.$message.error(response.data.msg || 'Failed to delete menu item');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error deleting menu item:', error);\r\n        this.$message.error('Error deleting menu item');\r\n      }\r\n    },\r\n    \r\n    resetForm() {\r\n      this.menuItemForm = {\r\n        id: null,\r\n        restaurantId: this.selectedRestaurantId,\r\n        name: '',\r\n        description: '',\r\n        price: 0,\r\n        category: '',\r\n        image: '',\r\n        isAvailable: true\r\n      };\r\n      this.editMode = false;\r\n    },\r\n    \r\n    cancelEdit() {\r\n      this.resetForm();\r\n    },\r\n    \r\n    goBack() {\r\n      this.$router.push('/restaurant-management');\r\n    },\r\n    \r\n    getRowClassName({row}) {\r\n      return row.isAvailable ? '' : 'unavailable-item';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.menu-management {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh2, h3 {\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\n.restaurant-selector {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.menu-content {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 30px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.menu-form {\r\n  background: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.menu-list {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  border: 1px solid #eee;\r\n}\r\n\r\n.category-filters {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.no-items, .no-restaurant-selected {\r\n  text-align: center;\r\n  color: #999;\r\n  padding: 30px 0;\r\n}\r\n\r\n.description-text {\r\n  display: block;\r\n  max-height: 80px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.actions-bar {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n/* 不可用菜单项的样式 */\r\n.unavailable-item {\r\n  background-color: #f9f9f9;\r\n  color: #999;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .menu-content {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style> "],"mappings":"AA2IA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,SAAA;MACAC,iBAAA;MACAC,oBAAA;MACAC,cAAA;MACAC,QAAA;MACAC,YAAA;QACAC,EAAA;QACAC,YAAA;QACAV,IAAA;QACAW,WAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;QACAC,WAAA;MACA;MACAC,QAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACAC,oBAAA;MACA;MACA,MAAAC,UAAA,QAAAjB,SAAA,CACAkB,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAT,QAAA,EACAU,MAAA,CAAAV,QAAA,IAAAA,QAAA;;MAEA;MACA,eAAAW,GAAA,CAAAJ,UAAA;IACA;EACA;EACAK,QAAA;IACA;IACA,KAAAT,QAAA,GAAAU,YAAA,CAAAC,OAAA;IACA,KAAAV,MAAA,GAAAS,YAAA,CAAAC,OAAA;;IAEA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACA,MAAAD,gBAAA;MACA;QACA,IAAAE,QAAA;QAEA,SAAAd,QAAA;UACA;UACAc,QAAA,SAAA/B,KAAA,CAAAgC,GAAA;QACA,gBAAAf,QAAA;UACA;UACAc,QAAA,SAAA/B,KAAA,CAAAgC,GAAA,qCAAAd,MAAA;QACA;QAEA,IAAAa,QAAA,IAAAA,QAAA,CAAA7B,IAAA,CAAA+B,IAAA;UACA,KAAA9B,WAAA,GAAA4B,QAAA,CAAA7B,IAAA,CAAAA,IAAA;;UAEA;UACA,SAAAC,WAAA,CAAA+B,MAAA;YACA,KAAA5B,oBAAA,QAAAH,WAAA,IAAAO,EAAA;YACA,KAAAyB,QAAA;UACA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA;QACA;MACA,SAAAA,KAAA;QACAC,OAAA,CAAAD,KAAA,+BAAAA,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;MACA;IACA;IAEA,MAAAF,SAAA;MACA,UAAA7B,oBAAA;MAEA;QACA,KAAAG,YAAA,CAAAE,YAAA,QAAAL,oBAAA;QAEA,MAAAyB,QAAA,SAAA/B,KAAA,CAAAgC,GAAA,+CAAA1B,oBAAA;QAEA,IAAAyB,QAAA,CAAA7B,IAAA,CAAA+B,IAAA;UACA,KAAA7B,SAAA,GAAA2B,QAAA,CAAA7B,IAAA,CAAAA,IAAA;UACA,KAAAqC,gBAAA;QACA;UACA,KAAAH,QAAA,CAAAC,KAAA,CAAAN,QAAA,CAAA7B,IAAA,CAAAsC,GAAA;QACA;MACA,SAAAH,KAAA;QACAC,OAAA,CAAAD,KAAA,wBAAAA,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;MACA;IACA;IAEAE,iBAAA;MACA,UAAAhC,cAAA;QACA,KAAAF,iBAAA,QAAAD,SAAA;MACA;QACA,KAAAC,iBAAA,QAAAD,SAAA,CAAAoB,MAAA,CAAAD,IAAA,IACAA,IAAA,CAAAT,QAAA,UAAAP,cACA;MACA;IACA;IAEA,MAAAkC,aAAA;MACA;MACA,UAAAhC,YAAA,CAAAR,IAAA,SAAAQ,YAAA,CAAAI,KAAA;QACA,KAAAuB,QAAA,CAAAC,KAAA;QACA;MACA;;MAEA;MACA,KAAA5B,YAAA,CAAAE,YAAA,QAAAL,oBAAA;MAEA;QACA,IAAAoC,GAAA;QACA,IAAAC,MAAA;;QAEA;QACA,SAAAnC,QAAA;UACAkC,GAAA;QACA;QAEA,MAAAX,QAAA,SAAA/B,KAAA;UACA2C,MAAA;UACAD,GAAA;UACAxC,IAAA,OAAAO;QACA;QAEA,IAAAsB,QAAA,CAAA7B,IAAA,CAAA+B,IAAA;UACA,KAAAG,QAAA,CAAAQ,OAAA,MAAApC,QAAA;UACA,KAAAqC,SAAA;UACA,KAAAV,QAAA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA,CAAAN,QAAA,CAAA7B,IAAA,CAAAsC,GAAA;QACA;MACA,SAAAH,KAAA;QACAC,OAAA,CAAAD,KAAA,4BAAAA,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;MACA;IACA;IAEAS,aAAAC,QAAA;MACA,KAAAvC,QAAA;MACA,KAAAC,YAAA;QAAA,GAAAsC;MAAA;;MAEA;MACA,KAAAC,SAAA;QACA,MAAAC,WAAA,GAAAC,QAAA,CAAAC,aAAA;QACA,IAAAF,WAAA;UACAA,WAAA,CAAAG,cAAA;YAAAC,QAAA;UAAA;QACA;MACA;IACA;IAEA,MAAAC,eAAAP,QAAA;MACA;QACA,IAAAQ,OAAA;UACA,MAAAxB,QAAA,SAAA/B,KAAA,CAAAwD,MAAA,sCAAAT,QAAA,CAAArC,EAAA;UAEA,IAAAqB,QAAA,CAAA7B,IAAA,CAAA+B,IAAA;YACA,KAAAG,QAAA,CAAAQ,OAAA;YACA,KAAAT,QAAA;UACA;YACA,KAAAC,QAAA,CAAAC,KAAA,CAAAN,QAAA,CAAA7B,IAAA,CAAAsC,GAAA;UACA;QACA;MACA,SAAAH,KAAA;QACAC,OAAA,CAAAD,KAAA,8BAAAA,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;MACA;IACA;IAEAQ,UAAA;MACA,KAAApC,YAAA;QACAC,EAAA;QACAC,YAAA,OAAAL,oBAAA;QACAL,IAAA;QACAW,WAAA;QACAC,KAAA;QACAC,QAAA;QACAC,KAAA;QACAC,WAAA;MACA;MACA,KAAAR,QAAA;IACA;IAEAiD,WAAA;MACA,KAAAZ,SAAA;IACA;IAEAa,OAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IAEAC,gBAAA;MAAAC;IAAA;MACA,OAAAA,GAAA,CAAA9C,WAAA;IACA;EACA;AACA","ignoreList":[]}]}